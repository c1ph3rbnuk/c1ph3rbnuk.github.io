;/*FB_PKG_DELIM*/

__d("ArtillerySegment",["invariant","cr:9985"],(function(a,b,c,d,e,f,g,h){var i=0;a=function(){function a(a){a||h(0,1496),"category"in a&&"description"in a||h(0,3138,JSON.stringify(a)),this.$1=!1,this.$2=babelHelpers["extends"]({},a,{id:(i++).toString(36)}),this.$3=[]}var c=a.prototype;c.getID=function(){return this.$2.id};c.begin=function(){this.$2.begin=b("cr:9985")();return this};c.end=function(){this.$2.end=b("cr:9985")();return this};c.appendChild=function(){var a=this;this.$1&&h(0,37302,this.$2.description);for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){a.$3.push(b.getID())});return this};c.setPosted=function(){this.$1=!0;return this};c.getPostData=function(){return babelHelpers["extends"]({},this.$2,{id:this.$2.id,children:this.$3.slice()})};return a}();g["default"]=a}),98);
__d("ArtillerySequence",["invariant"],(function(a,b,c,d,e,f,g,h){var i=0;a=function(){function a(a){a||h(0,1496),"description"in a||h(0,1497,JSON.stringify(a)),this.$1=!1,this.$2=babelHelpers["extends"]({},a,{id:(i++).toString(36)}),this.$3=[]}var b=a.prototype;b.getID=function(){return this.$2.id};b.addSegment=function(){var a=this;this.$1&&h(0,37342,this.$2.description);for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];c.forEach(function(b){a.$3.push(b.getID())});return this};b.setPosted=function(){this.$1=!0;return this};b.getPostData=function(){return babelHelpers["extends"]({},this.$2,{id:this.$2.id,segments:this.$3.slice()})};return a}();g["default"]=a}),98);
__d("ArtilleryTrace",["invariant","ArtillerySegment","ArtillerySequence"],(function(a,b,c,d,e,f,g,h){a=function(){function a(){this.$1=!1,this.$3=void 0,this.$4={},this.$5={},this.$6=[],this.$7=[],this.$8={},this.$9=[],this.$10=null}var b=a.prototype;b.createSequence=function(a){this.$1&&h(0,4917);a=new(c("ArtillerySequence"))(a);this.$6.push(a);return a};b.createSegment=function(a){this.$1&&h(0,4918);a=new(c("ArtillerySegment"))(a);this.$7.push(a);return a};b.markSegment=function(a,b){this.$1&&h(0,4919);this.$8[b]=a.getID();return this};b.connectTrace=function(a,b){this.$1&&h(0,4919);b=b||this.$2;b||h(0,4920);this.$9.push({segment:a.getID(),trace:b});return this};b.setID=function(a,b){!this.$2&&!this.$3||h(0,4921);this.$2=a;this.$3=b;return this};b.getID=function(){return this.$2};b.getArtillery2ID=function(){return this.$3};b.addProperty=function(a,b){this.$4[a]=b;return this};b.addTagset=function(a,b){this.$5[a]=b;return this};b.addActivePolicies=function(a){this.addTagset("active_policies",a);this.addTagset("policy",a);return this};b.getProperty=function(a){return this.$4[a]};b.getTagset=function(a){return this.$5[a]};b.getActivePolicies=function(){return this.getTagset("active_policies")};b.post=function(){this.$1&&h(0,37290,this.$2);this.$1=!0;var a=this.$10;a&&a({id:this.$2,artillery2Id:this.$3,properties:this.$4,tagsets:this.$5,sequences:this.$6.map(function(a){return a.setPosted().getPostData()}),segments:this.$7.map(function(a){return a.setPosted().getPostData()}),marks:babelHelpers["extends"]({},this.$8),connections:this.$9.slice()})};b.setOnPost=function(a){this.$10&&h(0,4923);this.$10=a;return this};b.isPosted=function(){return this.$1};return a}();g["default"]=a}),98);
__d("ServiceWorkerRegistration",["ClientServiceWorkerMessage","EventListener","Promise","Run","promiseDone"],(function(a,b,c,d,e,f){var g,h=!!navigator.serviceWorker,i={};function j(){var a=navigator.serviceWorker;if(!h||!a)throw new Error("serviceWorker is not supported in this browser");return a}var k={isSupported:function(){return h},registerWorkerIfUnregisteredAfterDD:function(a){b("Run").onAfterLoad(function(){k.registerWorkerIfUnregistered(a)})},registerWorkerIfUnregistered:function(a){if(i[a])return i[a];var c=j(),d=i[a]=new(g||(g=b("Promise")))(function(d,e){b("promiseDone")(k.getWorkerRegistration(a),function(f){if(!f){var h=b("EventListener").listen(window,"message",function(a){var b;(a==null||(b=a.data)==null?void 0:b.command)==="ServiceWorkerInstallError"&&e()});b("promiseDone")((g||(g=b("Promise"))).resolve(c.register(a,{updateViaCache:"all"})),function(){h.remove(),b("promiseDone")((g||(g=b("Promise"))).resolve(c.ready),d)})}else d(f)})});return d},unregisterControllingWorker:function(){return new(g||(g=b("Promise")))(function(a,c){c=new(b("ClientServiceWorkerMessage"))("unregister",{},function(){a(!0)});c.sendViaController()})},getWorkerRegistration:function(a){var b=j();return b.getRegistration(a)},isAWorkerActivated:function(){return!navigator.serviceWorker||!navigator.serviceWorker.getRegistration?(g||(g=b("Promise"))).resolve(!1):navigator.serviceWorker.getRegistration().then(function(a){return!!(a&&a.active)})}};e.exports=k}),null);
__d("Artillery",["invariant","ArtilleryTrace","Banzai","ClientServiceWorkerMessage","Run","ServiceWorkerRegistration","forEachObject","mixInEventEmitter","performance"],(function(a,b,c,d,e,f,g,h){var i,j=!1,k=!1,l=[],m,n,o,p={},q={},r=!1,s=!1;function t(){if(j)return;j=!0;c("Banzai").subscribe(c("Banzai").SHUTDOWN,function(){v._postAll()})}function u(){n=null,m=null,q={},p={},o=null,s=!1}var v={isEnabled:function(){return k},createTrace:function(){t();var a=new(c("ArtilleryTrace"))();a.setOnPost(function(a){v.emitAndHold("posttrace",a)});l.push(a);return a},getPageTrace:function(){m||h(0,4261);if(o)return o;var a=v.createTrace().setID(m,n);c("forEachObject")(p,function(b,c,d){a.addProperty(c,b)});c("forEachObject")(q,function(b,c,d){a.addTagset(c,b)});o=a;return a},setPageProperties:function(a){p=a},addPageTagset:function(a,b){o==null?q[a]=b:o.addTagset(a,b)},setActivePolicies:function(a){v.addPageTagset("active_policies",a),v.addPageTagset("policy",a)},getPageActivePolicies:function(){return v.getPageTagset("active_policies")},enableLogServiceWorker:function(){c("ServiceWorkerRegistration").isSupported()&&(r=!0)},getPageProperty:function(a){if(o==null)return p[a];else return o.getProperty(a)},getPageTagset:function(a){if(o==null)return q[a];else return o.getTagset(a)},enable:function(){k=!0,s||(d("Run").onLeave(u),s=!0)},disable:function(){k=!1},setPageTraceID:function(a,b){if(m===a&&n===b)return;!m&&!n||h(0,4262);m=a;n=b;if(r&&(i||(i=c("performance")))&&(i||(i=c("performance"))).timing&&(i||(i=c("performance"))).timing.navigationStart){a=new(c("ClientServiceWorkerMessage"))("asw-sendStartupData",{traceID:n,windowStart:(i||(i=c("performance"))).timing.navigationStart},null);a.sendViaController()}},_postAll:function(){l.forEach(function(a){return!a.isPosted()&&a.post()})}};c("mixInEventEmitter")(v,{posttrace:!0});a=v;g["default"]=a}),98);
__d("AsyncTypedRequest",["AsyncRequest"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){function b(b){b=a.call(this,b)||this;b.setReplaceTransportMarkers();return b}babelHelpers.inheritsLoose(b,a);var c=b.prototype;c.promisePayload=function(b){return a.prototype.promisePayload.call(this,b)};c.setPayloadHandler=function(b){a.prototype.setPayloadHandler.call(this,b);return this};return b}(c("AsyncRequest"));g["default"]=a}),98);
__d("isCometAltpayJsSdkIframeAllowedDomain",["CometAltpayJsSdkIframeAllowedDomains","URI"],(function(a,b,c,d,e,f,g){"use strict";var h;b=Object.freeze(c("CometAltpayJsSdkIframeAllowedDomains"));var i=Object.freeze(b.allowed_domains);function a(){var a=new(h||(h=c("URI")))(window.location.href);if(i==null||i.length<=0)return!1;var b=i.some(function(b){b=new(h||(h=c("URI")))(b);return b==null?!1:a.isSameOrigin(b)});return b?!0:!1}g["default"]=a}),98);
__d("BlueCompatBroker",["Env","URI","isCometAltpayJsSdkIframeAllowedDomain","isFacebookURI","isMessengerDotComURI","isWorkDotMetaDotComURI","isWorkplaceDotComURI"],(function(a,b,c,d,e,f){"use strict";var g,h,i,j=new Map(),k=!1,l=function(a){a=new(g||(g=b("URI")))(a);return b("isFacebookURI")(a)||b("isWorkplaceDotComURI")(a)||b("isMessengerDotComURI")(a)||b("isWorkDotMetaDotComURI")(a)},m={dispatch:function(a){var b=m.getMessageEventString(a,"compatAction");if(b!=null){b=j.get(b);b&&b(a)}},getMessageEventString:function(a,b){a=a.data;if(typeof a==="object"){a=a==null?void 0:a[b];if(typeof a==="string")return a}return""},init:function(a){a===void 0&&(a="");if(!k){document.body&&(document.body.style.overflow="auto");var c=b("isCometAltpayJsSdkIframeAllowedDomain")()?"https://secure.facebook.com/":document.referrer,d=c.indexOf("/",8);c=c.substring(0,d);if(l(c)){d=new MessageChannel();a=a!==""?a:(h||(h=b("Env"))).iframeKey;i=d.port1;i.onmessage=m.dispatch;window.parent.postMessage({compatAction:"CompatSetup",iframeKey:a},c+"/",[d.port2])}try{window.__REACT_DEVTOOLS_GLOBAL_HOOK__=window.parent.__REACT_DEVTOOLS_GLOBAL_HOOK__}catch(a){}k=!0}},register:function(a,b){j.set(a,b)},clear:function(a){j["delete"](a)},sendMessage:function(a){k||m.init(),i&&i.postMessage(babelHelpers["extends"]({},a))}};e.exports=m}),null);
__d("CacheStorage",["ErrorGuard","ExecutionEnvironment","WebStorage","cr:6943","cr:8958","emptyFunction","err"],(function(a,b,c,d,e,f,g){var h,i,j,k="_@_",l="3b",m="CacheStorageVersion",n={length:0,getItem:a=c("emptyFunction"),setItem:a,clear:a,removeItem:a,key:a};d=function(){function a(a){this._store=a}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){var a=[];for(var b=0;b<this._store.length;b++){var c=this._store.key(b);c!=null&&a.push(c)}return a};b.get=function(a){return this._store.getItem(a)};b.set=function(a,b){this._store.setItem(a,b)};b.remove=function(a){this._store.removeItem(a)};b.clear=function(){this._store.clear()};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d!=null&&d.startsWith(a)&&this.remove(d)}};return a}();e=function(a){function b(){var b;return a.call(this,(b=(h||(h=c("WebStorage"))).getLocalStorage())!=null?b:n)||this}babelHelpers.inheritsLoose(b,a);b.available=function(){return!!(h||(h=c("WebStorage"))).getLocalStorage()};return b}(d);g=function(a){function b(){var b;return a.call(this,(b=(h||(h=c("WebStorage"))).getSessionStorage())!=null?b:n)||this}babelHelpers.inheritsLoose(b,a);b.available=function(){return!!(h||(h=c("WebStorage"))).getSessionStorage()};return b}(d);var o=function(){function a(){this._store={}}var b=a.prototype;b.getStore=function(){return this._store};b.keys=function(){return Object.keys(this._store)};b.get=function(a){return this._store[a]===void 0?null:this._store[a]};b.set=function(a,b){this._store[a]=b};b.remove=function(a){a in this._store&&delete this._store[a]};b.clear=function(){this._store={}};b.clearWithPrefix=function(a){a=a||"";var b=this.keys();for(var c=0;c<b.length;c++){var d=b[c];d.startsWith(a)&&this.remove(d)}};a.available=function(){return!0};return a}(),p={memory:o,localstorage:e,sessionstorage:g};a=function(){function a(a,d){this._changeCallbacks=[];this._key_prefix="_cs_";this._exception=null;d&&(this._key_prefix=d);a==="AUTO"||!a?d="memory":d=a;d&&(!p[d]||!p[d].available()?((i||(i=c("ExecutionEnvironment"))).canUseDOM,this._backend=new o()):this._backend=new p[d]());a=this.useBrowserStorage();a&&b("cr:6943").listen(window,"storage",this._onBrowserValueChanged.bind(this));d=a?this._backend.getStore().getItem(m):this._backend.getStore()[m];d!==l&&this.clearOwnKeys()}var d=a.prototype;d.useBrowserStorage=function(){return this._backend.getStore()===(h||(h=c("WebStorage"))).getLocalStorage()||this._backend.getStore()===(h||(h=c("WebStorage"))).getSessionStorage()};d.addValueChangeCallback=function(a){var b=this;this._changeCallbacks.push(a);return{remove:function(){b._changeCallbacks.slice(b._changeCallbacks.indexOf(a),1)}}};d._onBrowserValueChanged=function(a){this._changeCallbacks&&String(a.key).startsWith(this._key_prefix)&&this._changeCallbacks.forEach(function(b){b(a.key,a.oldValue,a.newValue)})};d.keys=function(){var a=this,b=[];(j||(j=c("ErrorGuard"))).guard(function(){if(a._backend){var c=a._backend.keys(),d=a._key_prefix.length;for(var e=0;e<c.length;e++)c[e].substr(0,d)==a._key_prefix&&b.push(c[e].substr(d))}},{name:"CacheStorage"})();return b};d.set=function(d,e,f){if(this._backend){if(this.useBrowserStorage()&&a._persistentWritesDisabled){this._exception=c("err")("writes disabled");return!1}var g;typeof e==="string"?g=k+e:!f?(g={__t:Date.now(),__v:e},g=b("cr:8958").stringify(g)):g=b("cr:8958").stringify(e);f=this._backend;e=this._key_prefix+d;d=!0;var h=null;while(d)try{h=null,f.set(e,g),d=!1}catch(a){h=a;var i=f.keys().length;this._evictCacheEntries();d=f.keys().length<i}if(h!==null){this._exception=h;return!1}else{this._exception=null;return!0}}this._exception=c("err")("no back end");return!1};d.getLastSetExceptionMessage=function(){return this._exception?this._exception.message:null};d.getLastSetException=function(){return this._exception};d.getStorageKeyCount=function(){var a=this._backend;return a?a.keys().length:0};d._evictCacheEntries=function(){var c=[],d=this._backend;d.keys().forEach(function(e){if(e===m)return;var g=d.get(e);if(g===void 0){d.remove(e);return}if(a._hasMagicPrefix(g))return;try{g=b("cr:8958").parse(g,f.id)}catch(a){d.remove(e);return}g&&g.__t!==void 0&&g.__v!==void 0&&c.push([e,g.__t])});c.sort(function(a,b){return a[1]-b[1]});for(var e=0;e<Math.ceil(c.length/2);e++)d.remove(c[e][0])};d.get=function(d,e){var g;if(this._backend){(j||(j=c("ErrorGuard"))).applyWithGuard(function(){g=this._backend.get(this._key_prefix+d)},this,[],{onError:function(){g=null},name:"CacheStorage:get"});if(g!=null)if(a._hasMagicPrefix(g))g=g.substr(k.length);else try{g=b("cr:8958").parse(g,f.id),g&&g.__t!==void 0&&g.__v!==void 0&&(g=g.__v)}catch(a){g=void 0}else g=void 0}g===void 0&&e!==void 0&&(g=e,this.set(d,g));return g};d.remove=function(a){this._backend&&(j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+a],{name:"CacheStorage:remove"})};d._setVersion=function(){var a=this;(j||(j=c("ErrorGuard"))).applyWithGuard(function(){a.useBrowserStorage()?a._backend.getStore().setItem(m,l):a._backend.getStore()[m]=l},this,[],{name:"CacheStorage:setVersion"})};d.clear=function(){this._backend&&((j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.clear,this._backend,[],{name:"CacheStorage:clear"}),this._setVersion())};d.clearOwnKeys=function(){this._backend&&((j||(j=c("ErrorGuard"))).applyWithGuard(this._backend.clearWithPrefix,this._backend,[this._key_prefix],{name:"CacheStorage:clearOwnKeys"}),this._setVersion())};a.getAllStorageTypes=function(){return Object.keys(p)};a._hasMagicPrefix=function(a){return a.substr(0,k.length)===k};a.disablePersistentWrites=function(){a._persistentWritesDisabled=!0};return a}();a._persistentWritesDisabled=!1;f.exports=a}),34);
__d("Chromedome",["fbt"],(function(a,b,c,d,e,f,g,h){function i(){if(document.domain==null)return null;var a=document.domain,b=/^intern\./.test(a);if(b)return null;b=/(^|\.)facebook\.(com|sg)$/.test(a);if(b)return"facebook";b=/(^|\.)instagram\.com$/.test(a);if(b)return"instagram";b=/(^|\.)threads\.(com|net)$/.test(a);if(b)return"threads";b=/(^|\.)messenger\.com$/.test(a);return b?"messenger":null}function j(a){if(a==="instagram")return h._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable an Instagram feature or \"hack\" someone's account, it is a scam and will give them access to your Instagram account.");return a==="threads"?h._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Threads feature or \"hack\" someone's account, it is a scam and will give them access to your Threads account."):h._(/*BTDS*/"This is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Facebook feature or \"hack\" someone's account, it is a scam and will give them access to your Facebook account.")}function a(a){if(top!==window)return;a=i();if(a==null)return;var b=h._(/*BTDS*/"Stop!");a=j(a);var c=h._(/*BTDS*/"See {url} for more information.",[h._param("url","https://www.facebook.com/selfxss")]),d="font-family:helvetica; font-size:20px; ";[[b,d+"font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;"],[a,d],[c,d],["",""]].map(function(a){window.setTimeout(console.log.bind(console,"\n%c"+a[0].toString(),a[1]))})}g.start=a}),226);
__d("ClickRefUtils",["DataAttributeUtils"],(function(a,b,c,d,e,f){var g={get_intern_ref:function(a){if(a){var b={profile_minifeed:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,searchBarClickRef:1};for(a=a;a&&a!=document.body;a=a.parentNode){if(!a.id||typeof a.id!=="string")continue;if(a.id.substr(0,8)=="pagelet_")return a.id.substr(8);if(a.id.substr(0,8)=="box_app_")return a.id;if(b[a.id])return a.id}}return"-"},get_href:function(a){a=a.getAttribute&&(a.getAttribute("ajaxify")||a.getAttribute("data-endpoint"))||a.action||a.href||a.name;return typeof a==="string"?a:null},should_report:function(a,c){if(c=="FORCE")return!0;return c=="INDIRECT"?!1:a&&(g.get_href(a)||a.getAttribute&&b("DataAttributeUtils").getDataFt(a))}};e.exports=g}),null);
__d("ClickRefLogger",["Arbiter","Banzai","ClickRefUtils","ScriptPath","SessionName","Vector","collectDataAttributes","ge","pageID"],(function(a,b,c,d,e,f){var g={delay:0,retry:!0};function h(a){if(!b("ge")("content"))return[0,0,0,0];a=b("Vector").getEventPosition(a);return[a.x,a.y,0,0]}function i(c,d,e,f){var g="r",i=[0,0,0,0],j,k;if(e){j=e.type;j=="click"&&b("ge")("content")&&(i=h(e));var l=0;e.ctrlKey&&(l+=1);e.shiftKey&&(l+=2);e.altKey&&(l+=4);e.metaKey&&(l+=8);l&&(j+=l)}d&&(k=b("ClickRefUtils").get_href(d));l=b("collectDataAttributes")(e?e.target||e.srcElement:d,["ft","gt"]);Object.assign(l.ft,f.ft);Object.assign(l.gt,f.gt);typeof l.ft.ei==="string"&&delete l.ft.ei;e&&e.which&&(l.ft.click_type=e.which===1?"left":e.which===2?"middle":"right");return[c.ue_ts,c.ue_count,k||"-",c.context,j||"-",b("ClickRefUtils").get_intern_ref(d),g,a.URI?a.URI.getRequestURI(!0,!0).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,l].concat(i).concat(b("pageID")).concat(b("ScriptPath").getTopViewEndpoint())}b("Arbiter").subscribe("ClickRefAction/new",function(a,c){if(b("ClickRefUtils").should_report(c.node,c.mode)){a=i(c.cfa,c.node,c.event,c.extra_data);c=[b("SessionName").getName(),Date.now(),"act"];b("Banzai").post("click_ref_logger",Array.prototype.concat(c,a),g)}});b("Arbiter").subscribe("ClickRefAction/contextmenu",function(a,c){if(b("ClickRefUtils").should_report(c.node,c.mode)){a=i(c.cfa,c.node,c.event,c.extra_data);c=[b("SessionName").getName(),Date.now(),"act"];b("Banzai").post("click_ref_logger",Array.prototype.concat(c,a),g)}})}),null);
__d("DimensionTracking",["Cookie","Event","debounce","getViewportDimensions","isInIframe"],(function(a,b,c,d,e,f,g){function a(){var a=c("getViewportDimensions")();c("Cookie").set("wd",a.width+"x"+a.height)}c("isInIframe")()||(setTimeout(a,100),c("Event").listen(window,"resize",c("debounce")(a,250)),c("Event").listen(window,"focus",a))}),34);
__d("JavascriptWebErrorFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1828905");b=d("FalcoLoggerInternal").create("javascript_web_error",a);e=b;g["default"]=e}),98);
__d("ErrorTransport",["JavascriptWebErrorFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("JavascriptWebErrorFalcoEvent").log(function(){return a})}g.log=a}),98);
__d("EventListenerImplForCacheStorage",["CometEventListener"],(function(a,b,c,d,e,f){"use strict";f["default"]=b("CometEventListener")}),66);
__d("FalcoAppUniverse",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({FACEBOOK:1,INSTAGRAM:2,OCULUS:3});c=a;f["default"]=c}),66);
__d("Queue",[],(function(a,b,c,d,e,f){var g={};a=function(){function a(a){this._timeout=null,this._interval=(a==null?void 0:a.interval)||0,this._processor=a==null?void 0:a.processor,this._queue=[],this._stopped=!0}var b=a.prototype;b._dispatch=function(a){var b=this;a===void 0;if(this._stopped||this._queue.length===0)return;a=this._processor;if(a==null){this._stopped=!0;throw new Error("No processor available")}var c=this._interval;if(c!=null)a.call(this,this._queue.shift()),this._timeout=setTimeout(function(){return b._dispatch()},c);else while(this._queue.length)a.call(this,this._queue.shift())};b.enqueue=function(a){this._processor&&!this._stopped?this._processor(a):this._queue.push(a);return this};b.start=function(a){a&&(this._processor=a);this._stopped=!1;this._dispatch();return this};b.isStarted=function(){return!this._stopped};b.dispatch=function(){this._dispatch(!0)};b.stop=function(a){this._stopped=!0;a&&this._timeout!=null&&clearTimeout(this._timeout);return this};b.merge=function(a,b){if(b){(b=this._queue).unshift.apply(b,a._queue)}else{(b=this._queue).push.apply(b,a._queue)}a._queue=[];this._dispatch();return this};b.getLength=function(){return this._queue.length};a.get=function(b,c){var d;b in g?d=g[b]:d=g[b]=new a(c);return d};a.exists=function(a){return a in g};a.remove=function(a){return delete g[a]};return a}();f["default"]=a}),66);
__d("FalcoLoggerTransports",["AnalyticsCoreData","Banzai","ExecutionEnvironment","FalcoAppUniverse","FalcoUtils","ODS","PersistedQueue","Queue","WebSession","performanceAbsoluteNow","promiseDone","requireDeferredForDisplay","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("requireDeferredForDisplay")("TransportSelectingClientSingletonConditional").__setRef("FalcoLoggerTransports"),m=5*1024,n=(b=(i||(i=c("AnalyticsCoreData"))).max_delay_br_queue)!=null?b:60*1e3,o=(e=(i||(i=c("AnalyticsCoreData"))).max_delay_br_queue_immediate)!=null?e:1e3;b=(f=(i||(i=c("AnalyticsCoreData"))).max_delay_br_init_not_complete)!=null?f:1e3;var p="falco:",q=new(c("Queue"))(),r=5e3,s=6e4,t=c("uuidv4")(),aa="ods_web_batch",u=new Map(),v=new Set(),w=new Set(),x=d("FalcoUtils").getTaggedBitmap(38),y=(e=c("FalcoAppUniverse").cast((i||(i=c("AnalyticsCoreData"))).app_universe))!=null?e:1,z=[],A=0,B=null,C=!1,D=!1,E=!1,F=!0,G=!1,H=Date.now()-s,I=1,J=b>n?b:n,K=b;Y();for(e of(f=(i||(i=c("AnalyticsCoreData"))).stateful_events_list_for_br)!=null?f:[]){v.add(e)}for(f of(b=(i||(i=c("AnalyticsCoreData"))).stateless_non_fb_events_for_br)!=null?b:[]){w.add(f)}function L(){return(i||(i=c("AnalyticsCoreData"))).enable_bladerunner&&!(k||(k=c("ExecutionEnvironment"))).isInWorker}function M(a,b){d("FalcoUtils").bumpODSMetrics(b.item.name,"event.info.streaming.batched",1);var c=b.item.extra.length;A+c>m&&(clearTimeout(B),N());z.push([a,b]);A+=c}function N(){B=null;C=!1;var a=z;S("event.info.streaming.batch_processing",a.map(function(a){return a[1].item}));!G?O(a,"event.non_critical_failure.streaming_init_not_complete"):q.enqueue(function(b){return b.log(a.map(function(a){return a[1].item}),function(b){if(!b){O(a,"event.info.banzai_fallback");return}P(a,b,"event.info.streaming.enqueued")})});z=[];A=0}function O(a,b){var e=function(){var a,e=f[0],g=f[1],h=g.item;d("FalcoUtils").bumpODSMetrics(h.name,b,1);h.identity||(h.identity=(i||(i=c("AnalyticsCoreData"))).identity);if((a=h.logCritical)!=null?a:!1)U.logCritical([h],function(a){return e.markItem(g,a)});else{((a=h.logImmediate)!=null?a:!1)?U.logImmediately([h],function(a){return e.markItem(g,a)}):U.log([h],function(a){return e.markItem(g,a)})}};for(var f of a)e();return}function P(a,b,c){for(a of a){var e=a[0],f=a[1];d("FalcoUtils").bumpODSMetrics(f.item.name,c,1);e.markItem(f,b)}}function ba(a){return{events:a.map(function(a){return{name:a.name,extra:a.extra,rate:a.policy.r,time:a.time/1e3,tag:0,tags:a.tags,shouldAddState:a.shouldAddState,identity:Q(a.identity),expTags:a.exptTags,sessionID:a.sessionId,deviceID:a.deviceId}})}}function ca(a){var b;a={deviceId:(i||(i=c("AnalyticsCoreData"))).device_id,familyDeviceId:null,osBuildNumber:null,sessionId:a,appId:i.app_id,appVersion:(a=(i||(i=c("AnalyticsCoreData"))).app_version)!=null?a:null,bundleId:null,consentState:null,identity:null,pushPhase:i.push_phase};((b=(b=(i||(i=c("AnalyticsCoreData"))).stateful_events_list_for_br)==null?void 0:b.length)!=null?b:0)>0&&(a.ambientState=(i||(i=c("AnalyticsCoreData"))).state_for_br);a.identity=Q(i.identity);return Object.freeze(a)}function Q(a){var b=a==null?void 0:a.claim;b=b!=null?[b]:[];if(y===2||y===3){var c=a==null?void 0:a.appScopedIdentity;if(c!==void 0)return{appScopedIdentity:{uid:c,identifier:c,claims:b}}}else{c=a==null?void 0:a.fbIdentity;if(c!==void 0)return{facebookIdentity:{actorId:c.actorId,accountId:c.accountId,claims:b}}}return null}function R(a,b){for(var e of a){var f,g;f=(g={},g.e=e.extra,g.r=e.policy.r,g.d=(f=e.deviceId)!=null?f:(i||(i=c("AnalyticsCoreData"))).device_id,g.s=(f=e.sessionId)!=null?f:d("WebSession").getId(),g.t=e.time,g);e.privacyContext&&(f.p=e.privacyContext);e.tags!=null&&(f.b=e.tags);g=e.identity;g&&(f.id=g);c("Banzai").post(p+e.name,f,b)}S("event.uploaded",a)}function S(a,b){for(b of b)b.name!==aa&&d("FalcoUtils").bumpODSMetrics(b.name,a,1)}function T(a,b){var e="falco.fabric.www."+(i||(i=c("AnalyticsCoreData"))).push_phase;(h||(h=d("ODS"))).bumpEntityKey(1344,e,a,b)}var U={log:function(a,b){S("event.info.banzai.log.upload_processing",a),R(a,c("Banzai").BASIC),b(!0)},logImmediately:function(a,b){S("event.info.banzai.log_immediately.upload_processing",a),R(a,c("Banzai").VITAL),b(!0)},logCritical:function(a,b){S("event.info.banzai.log_critical.upload_processing",a),R(a,{signal:!0,retry:!0}),b(!0)}};function da(a){Y();var b=V(a,"banzai_data_loss","log"),d=V(a,"banzai_data_loss","logImmediately"),e=V(a,"banzai_data_loss","logCritical"),f=V(a,"bladerunner_data_loss",""),g=V(a,"bladerunner_data_loss","logCritical");T("js.br_data_loss.posted."+a,1);if(G&&F)try{q.enqueue(function(b){return b.log([f],function(b){if(!b){T("js.br.transport_failure."+a,1);U.logCritical([g],function(b){T("js.br.failure_fallback_success_callback."+a,1)});return}T("js.br.success_callback."+a,1)})})}catch(b){T("js.br.error_enqueueing."+a,1),U.logCritical([g],function(b){T("js.br.enqueuing_fallback_success_callback."+a,1)})}else F||T("js.br.failed."+a,1),G||T("js.br.init_not_complete."+a,1),U.logCritical([g],function(b){T("js.br.init_fallback_success_callback."+a,1)});R([b],c("Banzai").BASIC);R([d],c("Banzai").VITAL);R([e],{signal:!0,retry:!0})}function V(a,b,d){return{name:b,time:(j||(j=c("performanceAbsoluteNow")))(),policy:{r:1},extra:JSON.stringify({event_index:a,falco_js_connection_id:t,logging_mode:d,logging_flow_flag:"original_flow"})}}function W(){H+r<Date.now()&&(da(I),H=Date.now(),I++)}function X(){window.setTimeout(function(){W(),I<=40&&X()},s)}function ea(a){q.start(function(b){return b({log:function(d,b){S("event.info.streaming.queue_processing",d);var e=JSON.stringify(ba(d));a?(i||(i=c("AnalyticsCoreData"))).enable_ack?c("promiseDone")(a.amendWithAck(e),function(a){a?(S("event.streamed.with_ack",d),S("event.uploaded",d)):S("event.non_critical_failure.streaming.ack_failed",d),b(a)},function(){S("event.non_critical_failure.streaming.ack_rejected",d),b(!1)}):(a.amendWithoutAck(e),S("event.streamed.without_ack",d),S("event.uploaded",d)):(S("event.non_critical_error.streaming.stream_not_available",d),b(!1))},logImmediately:function(b,a){this.log(b,a)},logCritical:function(b,a){this.log(b,a)}})})}function Y(){if(D)return;G=!1;if(!L())return;l.onReady(function(a){if(!a){F=!1;q.start(function(a){return a(U)});return}a=a;var b={onTermination:function(a){a.message==="Stream closed"?(q.stop(!0),D=!1):(d("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.rejected",1),F=!1,q.start(function(a){return a(U)}))},onFlowStatus:function(){}};c("promiseDone")(a.requestStream({method:"Falco"},JSON.stringify(ca(d("WebSession").getId())),b,{requestId:""}).then(function(b){a=b,ea(a),G=!0,J=n,K=o})["catch"](function(a){d("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.failed",1),q.stop(!0),D=!1}))});D=!0}function Z(a){var b,e=a.name;if(!L()||!F)return!1;if(v.has(e)||a.policy.s!==1&&((b=(i||(i=c("AnalyticsCoreData"))).br_stateful_migration_on)!=null?b:!1)){a.shouldAddState=!0;a.tags=d("FalcoUtils").xorBitmap((b=a.tags)!=null?b:[0,0],x);return!0}if(y!==1&&(i||(i=c("AnalyticsCoreData"))).enable_non_fb_br_stateless_by_default!==!0&&!w.has(e))return!1;if(a.policy.s===1){a.tags=d("FalcoUtils").xorBitmap((b=a.tags)!=null?b:[0,0],x);return!0}return!1}function $(a){if(a==="")return null;if(u.has(a))return u.get(a);else{var b={claim:""},c=a.split("^#");if(c.length>=4){var d=c[0],e=c[1],f=c[2];c=c[3];f!==""?b={appScopedIdentity:f,claim:c}:d!==""&&(b={fbIdentity:{accountId:d,actorId:e},claim:c});u.set(a,b)}return b}}function a(){if(E)return;E=!0;c("PersistedQueue").setHandler("falco_queue_log",function(b){var e,f=b.getQueueNameSuffix(),g=$(f);while(e=b.dequeueItem())(function(e){Z(e.item)?(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.streaming.log",1),Y(),B==null&&(B=setTimeout(N,J)),g&&!a(f)&&(e.item.identity=g),M(b,e)):(g?e.item.identity=g:e.item.identity=(i||(i=c("AnalyticsCoreData"))).identity,U.log([e.item],function(a){return b.markItem(e,a)}))})(e)});c("PersistedQueue").setHandler("falco_queue_immediately",function(b){var e,f=b.getQueueNameSuffix(),g=$(f);while(e=b.dequeueItem())(function(e){Z(e.item)?(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.streaming.log_immediately",1),Y(),(B==null||!C)&&(clearTimeout(B),B=setTimeout(N,K),C=!0),e.item.logImmediate=!0,g&&!a(f)&&(e.item.identity=g),M(b,e),c("PersistedQueue").isPersistenceAllowed()||(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.streaming_no_persistence.log_immediately",1),N())):(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.banzai.log_immediately",1),g?e.item.identity=g:e.item.identity=(i||(i=c("AnalyticsCoreData"))).identity,U.logImmediately([e.item],function(a){return b.markItem(e,a)}))})(e)});c("PersistedQueue").setHandler("falco_queue_critical",function(b){var e,f=b.getQueueNameSuffix(),g=$(f);while(e=b.dequeueItem())(function(e){var h=e.item;Z(h)?(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.streaming.log_critical",1),Y(),h.logCritical=!0,!G?(g?h.identity=g:h.identity=(i||(i=c("AnalyticsCoreData"))).identity,O([[b,e]],"event.non_critical_failure.streaming_init_not_complete.log_critical")):(g&&!a(f)&&(h.identity=g),q.enqueue(function(a){return a.logCritical([h],function(a){if(!a){h.identity||(g?h.identity=g:h.identity=(i||(i=c("AnalyticsCoreData"))).identity);O([[b,e]],"event.info.banzai_fallback.log_critical");return}P([[b,e]],a,"event.uploaded")})}))):(g?h.identity=g:h.identity=(i||(i=c("AnalyticsCoreData"))).identity,d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.banzai.log_critical",1),U.logCritical([h],function(a){return b.markItem(e,a)}))})(e)});(i||(i=c("AnalyticsCoreData"))).enable_dataloss_timer&&(Y(),W(),X());function a(a){try{var b=d("FalcoUtils").identityToString((i||(i=c("AnalyticsCoreData"))).identity);return a===b}catch(a){(h||(h=d("ODS"))).bumpEntityKey(1344,"js.br.identity.check","exception.when.comparing.with.current.user.identity",1);return!0}}}g.attach=a}),98);
__d("NavigationClickPointHandler",["Event","ScriptPath","collectDataAttributes"],(function(a,b,c,d,e,f,g){function h(a){var b=null,d=c("collectDataAttributes")(a,["ft"],["href","data-click"]),e=d.normal.href;if(!e||e==="#")return!1;e=d.normal["data-click"];b===null&&e&&(b={click:e});e=d.ft.tn;b===null&&e&&(b={tn:e});if(b===null&&a.getAttribute){d=a.getAttribute("class");d!=null&&(b={"class":d})}return b}function a(a){a=a.target||a.srcElement;a=h(a);typeof a!="boolean"&&d("ScriptPath").setClickPointInfo(a)}document.documentElement!==null&&c("Event").listen(document.documentElement,{click:a});g.getClickPointInfo=h}),98);
__d("WebBlueTimeSpentNavigationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1829319");b=d("FalcoLoggerInternal").create("web_blue_time_spent_navigation",a);e=b;g["default"]=e}),98);
__d("ScriptPathLogger",["Banzai","LogHistory","ScriptPath","URI","WebBlueTimeSpentNavigationFalcoEvent","WebSession","isInIframe"],(function(a,b,c,d,e,f,g){"use strict";var h;f="script_path_change";var i={scriptPath:null,categoryToken:null,extraData:{}},j=!1,k="imp_id";function l(a){var b=(h||(h=c("URI"))).getNextURI?(h||(h=c("URI"))).getNextURI():new(h||(h=c("URI")))(window.location.href),d=b.getQueryData();b=b.getPath();b.endsWith("/")&&(b=b.substr(0,b.length-1));d.comment_id&&(a.extra_data=babelHelpers["extends"]({},a.extra_data,{graphql_comment_id:d.comment_id}));var e=m(b,d);if(e){a.content_id=e;return}e=n(b);if(e!==""){a.dest_topic_feed=e;return}if(o(b)){e=d.queue_id;e&&(a.dest_srt_queue_id=e);b=d.job_in_review;b&&(a.dest_srt_reviewing_job_id=b);return}}function m(a,b){if(b.story_fbid)return b.story_fbid;if(b.fbid)return b.fbid;if(b.view==="permalink"&&b.id)return b.id;b=/\/(posts|videos|notes|groups\/.*\/permalink)\//;var c=/^[0-9]+$/;if(b.test(a)){b=a.split("/");a=b[b.length-1];if(c.test(a))return a}return""}function n(a){if(!a||a.search("/feed/topics/")==-1)return"";a=a.split("/");return a[a.length-1]}function o(a){return!!a&&a.search("/intern/review/")!==-1}function p(a,b,e,f){d("WebSession").extend();if(!j||c("isInIframe")())return;var g={source_path:a.scriptPath,source_token:a.categoryToken,dest_path:b.scriptPath,dest_token:b.categoryToken,impression_id:b.extraData?b.extraData.imp_id:null,cause:e,sid_raw:d("WebSession").getId()};e=e==="unload";e||l(g);if(f!=null){var h=f.snowlift_content_id;!e&&h!=null&&(g.content_id=h,delete f.snowlift_content_id);g.extra_data=babelHelpers["extends"]({},g.extra_data,f)}a.scriptPath===null&&(g.referrer=document.referrer);e=d("ScriptPath").getClickPointInfo();e&&(g.click_point_info=e);if(a.extraData)for(h in a.extraData)h!=k&&(g["source_"+h]=a.extraData[h]);if(b.extraData)for(f in b.extraData)f!=k&&(g["dest_"+f]=b.extraData[f]);a.topViewEndpoint&&(g.source_endpoint=a.topViewEndpoint);b.topViewEndpoint&&(g.dest_endpoint=b.topViewEndpoint);a.restored&&(g.source_restored=!0);c("WebBlueTimeSpentNavigationFalcoEvent").logImmediately(function(){return{json_data:JSON.stringify(g)}});d("ScriptPath").setClickPointInfo(null)}function q(){p(d("ScriptPath").getSourcePageInfo()||i,d("ScriptPath").getPageInfo()||i,"load")}function r(a,b,c){p(a,b,"transition",c)}function a(){p(d("ScriptPath").getPageInfo()||i,i,"unload"),d("ScriptPath").shutdown()}var s=d("ScriptPath").subscribe(function(a){if(j){var b=a.source,c=a.dest,d=a.cause;a=a.extraData;d?p(b||i,c||i,d,a):b?r(b,c||i,a):q()}});c("Banzai").subscribe(c("Banzai").SHUTDOWN,a);function b(){j=!0,d("ScriptPath").getPageInfo()&&q()}function e(){j=!1,s.remove()}g.BANZAI_LOGGING_ROUTE=f;g.startLogging=b;g.stopLogging=e}),98);
__d("ServiceWorkerURLCleaner",[],(function(a,b,c,d,e,f){var g=/sw_fnr_id=\d+&?/,h=/fnr_t=\d+&?/,i=!1,j=!1;function a(){if(i)return j;i=!0;if(location.search&&g.test(location.search)){j=!0;if(history!==void 0&&typeof history.replaceState==="function"){var a=location.toString().replace(g,"").replace(h,"").replace(/\?$/,"");history.replaceState({},document.title,a)}}return j}f.removeRedirectID=a}),66);
__d("StringTransformations",[],(function(a,b,c,d,e,f){"use strict";a={unicodeEscape:function(a){return a.replace(/[^A-Za-z0-9\-\.\:\_\$\/\+\=]/g,function(a){a=a.charCodeAt(0).toString(16);return"\\u"+("0000"+a.toUpperCase()).slice(-4)})},unicodeUnescape:function(a){return a.replace(/(\\u[0-9A-Fa-f]{4})/g,function(a){return String.fromCharCode(parseInt(a.slice(2),16))})}};f["default"]=a}),66);
__d("TimeSpentArray",["Banzai","TimeSlice","clearTimeout","pageID","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=2,i=h*32,j,k,l,m,n,o,p,q,r,s,t,u={},v,w=null,x=null;function y(){return{timeoutDelayMap:u,nextDelay:v,timeoutInSeconds:n}}function z(){if(j){var a=Date.now();a>p&&(r=Math.min(i,Math.ceil(a/1e3-o)));a=E();a&&j(a,v)}D()}function A(){B(),m=c("setTimeoutAcrossTransitions")(c("TimeSlice").guard(z,"TimeSpentArray Timeout",{propagationType:c("TimeSlice").PropagationType.ORPHAN}),n*1e3)}function B(){m&&(c("clearTimeout")(m),m=null)}function C(a,b){o=a;p=o*1e3;q=[1];for(a=1;a<h;a++)q.push(0);r=1;s+=1;t+=1;a=t.toString()+"_delay";v=u[a];v===void 0&&(v=u.delay);a=t.toString()+"_timeout";a=u[a];a===void 0&&(a=u.timeout);a=Math.min(a,i);n=a||i;w=l?l():null;x=b;A()}function D(){B(),q=null}function E(){return!q?null:{tos_id:c("pageID"),start_time:o,tos_array:q.slice(0),tos_len:r,tos_seq:t,tos_cum:s,start_endpoint:w,start_event:x}}function F(a,b){if(a>=p&&a-p<1e3)return;k&&k(a);G(Math.floor(a/1e3),b)}function G(a,b){var c=a-o;(c<0||c>=i)&&z();!q?C(a,b):(q[c>>5]|=1<<(c&31),r=c+1,s+=1,p=a*1e3)}function a(a,b,d,e,f){s=0,t=-1,j=a,k=e,l=f,typeof b==="object"&&b!==null?u=b:u={},C(Math.floor((d===void 0||d===null||d===0?Date.now():d)/1e3),"init"),c("Banzai").subscribe(c("Banzai").SHUTDOWN,z)}function b(a,b){F(a,b!=null?b:"unknown")}function d(){return E()}function e(){z()}function f(){D()}function H(){return y()}g.init=a;g.update=b;g.get=d;g.ship=e;g.reset=f;g.testState=H}),98);
__d("TimeSpentImmediateActiveSecondsLogger",["cr:844180"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:844180")}),98);
__d("WebTimeSpentBitArrayFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1829320");b=d("FalcoLoggerInternal").create("web_time_spent_bit_array",a);e=b;g["default"]=e}),98);
__d("TimeSpentBitArrayLogger",["Arbiter","Env","LogHistory","ODS","TimeSpentArray","TimeSpentConfig","TimeSpentImmediateActiveSecondsLogger","UserActivity","WebSession","WebTimeSpentBitArrayFalcoEvent","cr:1187159","isInIframe"],(function(a,b,c,d,e,f,g){var h,i,j="";function k(a){a=l();a!==j&&(b("TimeSpentArray").ship(),j=a)}function l(){b("WebSession").extend();return b("WebSession").getId()}function m(a,d){a.sid_raw=j,b("Arbiter").inform("timespent/tosbitdataposted",babelHelpers["extends"]({},a)),c("WebTimeSpentBitArrayFalcoEvent").logImmediately(function(){return{sid_raw:a.sid_raw,start_time:a.start_time,tos_array:a.tos_array,tos_cum:a.tos_cum,tos_id:a.tos_id,tos_len:a.tos_len,tos_seq:a.tos_seq}})}f.exports={init:function(a){if(b("isInIframe")()&&!(h||(h=b("Env"))).isCQuick)return;if((h||(h=b("Env"))).isCQuick){b("cr:1187159")!=null?b("UserActivity").subscribe(function(a,c){b("cr:1187159").sendMessage({compatAction:"update_time_spent_bit_array_from_boc",eventTimeInMs:c.last_inform})}):(i||(i=b("ODS"))).bumpEntityKey(223,"core_metrics.time_spent.www","blue_on_comet_without_compat_broker");return}j=l();b("UserActivity").subscribe(function(a,c){a=c.last_inform;b("TimeSpentArray").update(a);b("TimeSpentImmediateActiveSecondsLogger").maybeReportActiveSecond(a)});a=Date.now();b("TimeSpentArray").init(m,b("TimeSpentConfig"),a,k);b("TimeSpentImmediateActiveSecondsLogger").maybeReportActiveSecond(a);(i||(i=b("ODS"))).bumpEntityKey(2966,"ms.time_spent.qa.www","time_spent.bits.js_initialized")}}}),34);
__d("WebImmediateActiveSecondsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1843988");b=d("FalcoLoggerInternal").create("web_immediate_active_seconds",a);e=b;g["default"]=e}),98);
__d("TimeSpentImmediateActiveSecondsLoggerBlue",["ImmediateActiveSecondsConfig","ScriptPath","WebImmediateActiveSecondsFalcoEvent"],(function(a,b,c,d,e,f,g){var h=0;function i(a){if(c("ImmediateActiveSecondsConfig").sampling_rate<=0)return!1;a=Math.floor(a/1e3)%c("ImmediateActiveSecondsConfig").sampling_rate;return a===c("ImmediateActiveSecondsConfig").ias_bucket}function a(a){if(a>=h&&a-h<1e3)return;i(a)&&c("WebImmediateActiveSecondsFalcoEvent").logImmediately(function(){return{activity_time_ms:a,last_activity_time_ms:h,script_path:c("ScriptPath").getTopViewEndpoint()}});h=Math.floor(a/1e3)*1e3}f.exports={maybeReportActiveSecond:a}}),34);
__d("TransportSelectingClientSingletonConditional",["cr:710"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:710")}),98);
__d("WebPerfDeviceInfoLogFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1871697");b=d("FalcoLoggerInternal").create("web_perf_device_info_log",a);e=b;g["default"]=e}),98);
__d("XDeviceClassRealtimeControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/web_perf/get_perf_level/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("WebDevicePerfInfoLogging",["AsyncTypedRequest","JSScheduler","Promise","WebDevicePerfInfoData","WebPerfDeviceInfoLogFalcoEvent","XDeviceClassRealtimeControllerRouteBuilder","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b=document.createElement("canvas");b=b.getContext("webgl")||b.getContext("experimental-webgl");if(!b)return;var c=b.getExtension("WEBGL_debug_renderer_info");if(!c)return;var d=b.getParameter(c.UNMASKED_RENDERER_WEBGL);b=b.getParameter(c.UNMASKED_VENDOR_WEBGL);a.gpu_vendor=b;a.gpu_renderer=d}function k(){var a=window.navigator,b={};a&&a.hardwareConcurrency!==void 0&&(b.cpu_cores=a.hardwareConcurrency);a&&a.deviceMemory!==void 0&&(b.ram=a.deviceMemory);c("WebDevicePerfInfoData").needsFullUpdate&&j(b);return b}function l(){var a=k();c("WebPerfDeviceInfoLogFalcoEvent").log(function(){var b;return{cpu_cores:(b=a.cpu_cores)!=null?b:null,ram:(b=a.ram)!=null?b:null,gpu_renderer:(b=a.gpu_renderer)!=null?b:null,gpu_vendor:(b=a.gpu_vendor)!=null?b:null}})}function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=k();a=(yield new(c("AsyncTypedRequest"))(c("XDeviceClassRealtimeControllerRouteBuilder").buildURL({})).setData(a).promisePayload());return a.devicePerfClassLevel});return n.apply(this,arguments)}function a(){(c("WebDevicePerfInfoData").needsFullUpdate||c("WebDevicePerfInfoData").needsPartialUpdate)&&(i||(i=d("JSScheduler"))).scheduleSpeculativeCallback(l)}function e(){return new(h||(h=b("Promise")))(function(a,b){c("WebDevicePerfInfoData").needsFullUpdate||c("WebDevicePerfInfoData").needsPartialUpdate?(i||(i=d("JSScheduler"))).scheduleSpeculativeCallback(function(){m().then(a)["catch"](b)}):a()})}g.doLog=a;g.doLogPromise=e}),98);
__d("WebStorageMonster",["AsyncRequest","CacheStorage","Event","ExecutionEnvironment","NetworkStatus","StringTransformations","UserActivity","WebStorage","WebStorageCleanupReason","WebStorageMonsterLoggingURI","ifRequired","isEmpty","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=1e4,l=5,m=!1;function n(a){var b={};for(var d in a){var e=a.getItem(d),f=c("StringTransformations").unicodeEscape(d);typeof e==="string"&&(b[f]=e.length)}return b}function o(a){var b=(h||(h=c("WebStorage"))).getLocalStorage();if(!b||a==null||!a.keys)return;r._getLocalStorageKeys().forEach(function(c){a.keys.includes(c)&&b.removeItem(c)})}function p(a){var b=(h||(h=c("WebStorage"))).getLocalStorage();b&&r._getLocalStorageKeys().forEach(function(c){a.some(function(a){return new RegExp(a).test(c)})||b.removeItem(c)})}function q(a,b){a===void 0&&(a=!1);b===void 0&&(b=k);if(c("UserActivity").isActive(b)){var d=Math.max(k,Math.floor(b/l));c("setTimeoutAcrossTransitions")(function(){q(a,d)},d)}else{r.cleanNow(a);var e=b*l;c("setTimeoutAcrossTransitions")(function(){q(a,e)},e)}}var r={_getLocalStorageKeys:function(){var a=(h||(h=c("WebStorage"))).getLocalStorage();return a?Object.keys(a):[]},cleanNow:function(a){a===void 0&&(a=!1);var b=Date.now(),d={},e=(h||(h=c("WebStorage"))).getLocalStorage();e&&(d.local_storage=n(e));e=h.getSessionStorage();e&&(d.session_storage=n(e));e=!(i||(i=c("isEmpty")))(d);var f=Date.now();d.logtime=f-b;if(e){var g,j=c("WebStorageMonsterLoggingURI").uri;if(j===null)return null;var k=function(){new(c("AsyncRequest"))(j).setData(d).setHandler(function(b){b=b.getPayload();b&&b.keys&&(b.keys=b.keys.map(c("StringTransformations").unicodeUnescape));a||o(b);c("NetworkStatus").reportSuccess()}).setErrorHandler(function(){c("NetworkStatus").reportError()}).setOption("retries",2).send()};if(c("NetworkStatus").isOnline())k();else{f=function(a){a=a.online;a&&(k(),g.remove())};g=c("NetworkStatus").onChange(f)}}},cleanOnLogout:function(a,b){d("WebStorageCleanupReason").setLastCleanupReason(b);c("CacheStorage").disablePersistentWrites();c("ifRequired")("WebAsyncStorage",function(a){a.disablePersistentWrites()});a?p(a):p([]);b=(h||(h=c("WebStorage"))).getSessionStorage();b&&b.clear();c("ifRequired")("WebAsyncStorage",function(a){a.clear(function(){})})},registerLogoutForm:function(a,b){c("Event").listen(a,"submit",function(a){r.cleanOnLogout(b,"WebStorageMonster.registerLogoutForm")})},schedule:function(a){a===void 0&&(a=!1);if(m||!(j||(j=c("ExecutionEnvironment"))).isInBrowser)return;m=!0;q(a)}};a=r;g["default"]=a}),98);